<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1376pt" height="436pt" viewBox="0 0 1376.45 436.2"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 432.2)"><title>UmlClassDiagram</title><polygon fill="#fff" stroke="transparent" points="-4 4 -4 -432.2 1372.45 -432.2 1372.45 4 -4 4"/><g id="node1" class="node"><title>0</title><polygon fill="#f2f2f2" stroke="#000" points="0 -.5 0 -427.7 1368.45 -427.7 1368.45 -.5 0 -.5"/><text x="684.225" y="-411.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">MarginCalculator</text><polyline fill="none" stroke="#000" points="0 -402.9 1368.45 -402.9"/><text x="8" y="-386.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="8" y="-369.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">addressBook: address</text><polyline fill="none" stroke="#000" points="0 -361.3 1368.45 -361.3"/><text x="8" y="-344.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Internal:</text><text x="8" y="-327.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_isMarginableLong(_vault: MarginVault.Vault): bool</text><text x="8" y="-311.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_getExpiredCashValue(_otoken: address): uint256</text><text x="8" y="-294.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_getPutSpreadMarginRequired(_shortAmount: FPI.FixedPointInt, _longAmount: FPI.FixedPointInt, _shortStrike: FPI.FixedPointInt, _longStrike: FPI.FixedPointInt): FPI.FixedPointInt</text><text x="8" y="-277.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_getCallSpreadMarginRequired(_shortAmount: FPI.FixedPointInt, _longAmount: FPI.FixedPointInt, _shortStrike: FPI.FixedPointInt, _longStrike: FPI.FixedPointInt): FPI.FixedPointInt</text><text x="8" y="-260.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_getExpiredPutSpreadCashValue(_shortAmount: FPI.FixedPointInt, _longAmount: FPI.FixedPointInt, _shortCashValue: FPI.FixedPointInt, _longCashValue: FPI.FixedPointInt): FPI.FixedPointInt</text><text x="8" y="-243.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_getExpiredCallSpreadCashValue(_shortAmount: FPI.FixedPointInt, _longAmount: FPI.FixedPointInt, _shortCashValue: FPI.FixedPointInt, _longCashValue: FPI.FixedPointInt, _underlyingPriceInt: FPI.FixedPointInt): FPI.FixedPointInt</text><text x="8" y="-227.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_checkIsValidSpread(_vault: MarginVault.Vault)</text><text x="8" y="-210.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_getMarginRequired(_vault: MarginVault.Vault): FPI.FixedPointInt</text><text x="8" y="-193.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_isMarginableCollateral(_vault: MarginVault.Vault): bool</text><text x="8" y="-176.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_getAssetPrice(_asset: address, _expiry: uint256): (price: uint256, isFinalized: bool)</text><text x="8" y="-159.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_getToCollateralRate(_short: address): FPI.FixedPointInt</text><text x="8" y="-143.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_uint256ToFPI(_num: uint256): FPI.FixedPointInt</text><text x="8" y="-126.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_isEmptyAssetArray(_assets: address[]): bool</text><text x="8" y="-109.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_tokenAmountToInternalAmount(_amount: uint256, _token: address): uint256</text><text x="8" y="-92.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_internalAmountToTokenAmount(_amount: uint256, _token: address): uint256</text><text x="8" y="-75.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="8" y="-59.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getExpiredPayoutRate(_otoken: address): uint256</text><text x="8" y="-42.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="8" y="-25.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">constructor(_addressBook: address)</text><text x="8" y="-8.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getExcessCollateral(_vault: MarginVault.Vault): (uint256, bool)</text></g></g></svg>